(function(n){return n.easyPieChart=function(t,i){var s,u,f,h,e,o,c,l,r=this;return this.el=t,this.$el=n(t),this.$el.data("easyPieChart",this),this.init=function(){var u,t;return r.options=n.extend({},n.easyPieChart.defaultOptions,i),u=r.options.percent||parseInt(r.$el.data("percent"),10),r.percentage=0,r.canvas=n("<canvas width='"+r.options.size+"' height='"+r.options.size+"'><\/canvas>").get(0),r.$el.append(r.canvas),typeof G_vmlCanvasManager!="undefined"&&G_vmlCanvasManager!==null&&G_vmlCanvasManager.initElement(r.canvas),r.ctx=r.canvas.getContext("2d"),window.devicePixelRatio>1&&(t=window.devicePixelRatio,n(r.canvas).css({width:r.options.size,height:r.options.size}),r.canvas.width*=t,r.canvas.height*=t,r.ctx.scale(t,t)),r.ctx.translate(r.options.size/2,r.options.size/2),r.ctx.rotate(r.options.rotate*Math.PI/180),r.$el.addClass("easyPieChart"),r.$el.css({width:r.options.size,height:r.options.size,lineHeight:""+r.options.size+"px"}),r.update(u),r},this.update=function(n){return n=parseFloat(n)||0,r.options.animate===!1?f(n):r.options.delay?(u(r.percentage,0),setTimeout(function(){return u(r.percentage,n)},r.options.delay)):u(r.percentage,n),r},c=function(){var n,t,i;for(r.ctx.fillStyle=r.options.scaleColor,r.ctx.lineWidth=1,i=[],n=t=0;t<=24;n=++t)i.push(s(n));return i},s=function(n){var t;t=n%6==0?0:r.options.size*.017;r.ctx.save();r.ctx.rotate(n*Math.PI/12);r.ctx.fillRect(r.options.size/2-t,0,-r.options.size*.05+t,1);r.ctx.restore()},l=function(){var n;n=r.options.size/2-r.options.lineWidth/2;r.options.scaleColor!==!1&&(n-=r.options.size*.08);r.ctx.beginPath();r.ctx.arc(0,0,n,0,Math.PI*2,!0);r.ctx.closePath();r.ctx.strokeStyle=r.options.trackColor;r.options.color&&(r.ctx.fillStyle=r.options.color,r.ctx.fill());r.ctx.lineWidth=r.options.lineWidth;r.ctx.stroke()},o=function(){r.options.scaleColor!==!1&&c();r.options.trackColor!==!1&&l()},f=function(t){var i;o();r.ctx.strokeStyle=n.isFunction(r.options.barColor)?r.options.barColor(t):r.options.barColor;r.ctx.lineCap=r.options.lineCap;r.ctx.lineWidth=r.options.lineWidth;i=r.options.size/2-r.options.lineWidth/2;r.options.scaleColor!==!1&&(i-=r.options.size*.08);r.ctx.save();r.ctx.rotate(-Math.PI/2);r.ctx.beginPath();r.ctx.arc(0,0,i,0,Math.PI*2*t/100,!1);r.ctx.stroke();r.ctx.restore()},e=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){return window.setTimeout(n,1e3/60)}}(),u=function(n,t){var i,u;r.options.onStart.call(r);r.percentage=t;Date.now||(Date.now=function(){return+new Date});u=Date.now();i=function(){var s,c;return c=Math.min(Date.now()-u,r.options.animate),r.ctx.clearRect(-r.options.size/2,-r.options.size/2,r.options.size,r.options.size),o.call(r),s=[h(c,n,t-n,r.options.animate)],r.options.onStep.call(r,s),f.call(r,s),c>=r.options.animate?r.options.onStop.call(r,s,t):e(i)};e(i)},h=function(n,t,i,r){var u,f;return u=function(n){return Math.pow(n,2)},f=function(n){return n<1?u(n):2-u(n*-1+2)},n/=r/2,i/2*f(n)+t},this.init()},n.easyPieChart.defaultOptions={percent:0,barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",rotate:0,size:110,lineWidth:3,animate:!1,delay:!1,onStart:n.noop,onStop:n.noop,onStep:n.noop},n.fn.easyPieChart=function(t){return n.each(this,function(i,r){var u,f;if(u=n(r),u.data("easyPieChart"))u.data("easyPieChart").update(t.percent);else return f=n.extend({},t,u.data()),u.data("easyPieChart",new n.easyPieChart(r,f))})},void 0})(jQuery);